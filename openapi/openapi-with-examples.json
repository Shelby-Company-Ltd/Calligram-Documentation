{"openapi":"3.0.1","info":{"version":"0.1.0","title":"Calligram API","termsOfService":"https://www.calligram.io/policies/privacy","contact":{"name":"Nico Bautista Hobin","email":"nico@calligram.io"},"x-logo":{"url":"https://raw.githubusercontent.com/Shelby-Company-Ltd/Calligram-Documentation/main/logo.png","backgroundColor":"#FFFFFF","altText":"Calligram logo"},"description":"## Calligram API: natural language API search and interfacing as a service.\nCalligram provides an API that exposes functionality for using natural language to interface with any REST API. For examples and helper, code see [Calligram Documentation](https://github.com/Shelby-Company-Ltd/Calligram-Documentation).\nPlease note that the Map Parameters endpoint makes heavy use of caching. So, if an initial request fails with a timeout error, retrying the same request in a minute will likely result in success. <br> <br> _A note on enumeration values and taxonomies_ <br> Calligram currently limits the maximum depth of any taxonomy to three levels and the maximum number of enumeration values to 96 (in any simple enumeration or in any one level of a taxonomy). If an enumeration or taxonomy is passed that exceeds these limits, execution will terminate early and a parameter value may not be parsed even if a parameter's presence is detected. In this case, the Calligram API will return a warnings array to the user indicating that execution terminated early."},"servers":[{"url":"https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production"}],"paths":{"/map":{"post":{"summary":"Map Parameters","description":"Return a map of specified API parameter ids to extracted values from an arbitrary natural language query.\nPlease note that none of `###`, `==>`, `\\n` (newline) may be present anywhere in the request body (neither in names nor descriptions nor values).","operationId":"postMapParametersRequest","security":[{"api_key":[]}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/response200"}}}},"400":{"description":"Bad request.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/response400"}}}},"403":{"description":"API key information is missing or invalid."},"429":{"description":"API rate limit (1 request/second) or quota (100 requests/day) exceeded."},"5XX":{"description":"Unexpected error."}},"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/request"}}},"description":"A map parameters endpoint request body consisting of a list of API parameter objects and a natural language query.","required":true},"x-codeSamples":[{"lang":"Node + Request","source":"const request = require('request');\n\nconst options = {\n  method: 'POST',\n  url: 'https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map',\n  headers: {'content-type': 'application/json', 'x-api-key': 'REPLACE_KEY_VALUE'},\n  body: {\n    query: 'Find Mexican restaurants open now in Phoenix with a price range of $$$.',\n    name: 'yelp_businesses',\n    parameters: [\n      {\n        name: 'categories',\n        description: 'The category of businesses to return.',\n        example: 'Restaurants',\n        requires: ['term'],\n        excludes: ['term'],\n        values: [\n          'Arts and Entertainment',\n          'Business and Professional Services',\n          'Community and Government',\n          'Dining and Drinking',\n          'Event',\n          'Health and Medicine',\n          'Landmarks and Outdoors',\n          'Retail',\n          'Sports and Recreation',\n          'Travel and Transportation'\n        ]\n      }\n    ]\n  },\n  json: true\n};\n\nrequest(options, function (error, response, body) {\n  if (error) throw new Error(error);\n\n  console.log(body);\n});\n"},{"lang":"Shell + Curl","source":"curl --request POST \\\n  --url https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map \\\n  --header 'content-type: application/json' \\\n  --header 'x-api-key: REPLACE_KEY_VALUE' \\\n  --data '{\"query\":\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\",\"name\":\"yelp_businesses\",\"parameters\":[{\"name\":\"categories\",\"description\":\"The category of businesses to return.\",\"example\":\"Restaurants\",\"requires\":[\"term\"],\"excludes\":[\"term\"],\"values\":[\"Arts and Entertainment\",\"Business and Professional Services\",\"Community and Government\",\"Dining and Drinking\",\"Event\",\"Health and Medicine\",\"Landmarks and Outdoors\",\"Retail\",\"Sports and Recreation\",\"Travel and Transportation\"]}]}'"},{"lang":"Shell + Httpie","source":"echo '{\"query\":\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\",\"name\":\"yelp_businesses\",\"parameters\":[{\"name\":\"categories\",\"description\":\"The category of businesses to return.\",\"example\":\"Restaurants\",\"requires\":[\"term\"],\"excludes\":[\"term\"],\"values\":[\"Arts and Entertainment\",\"Business and Professional Services\",\"Community and Government\",\"Dining and Drinking\",\"Event\",\"Health and Medicine\",\"Landmarks and Outdoors\",\"Retail\",\"Sports and Recreation\",\"Travel and Transportation\"]}]}' |  \\\n  http POST https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map \\\n  content-type:application/json \\\n  x-api-key:REPLACE_KEY_VALUE"},{"lang":"Python + Python3","source":"import http.client\n\nconn = http.client.HTTPSConnection(\"y7xqsccv49.execute-api.us-west-1.amazonaws.com\")\n\npayload = \"{\\\"query\\\":\\\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\\\",\\\"name\\\":\\\"yelp_businesses\\\",\\\"parameters\\\":[{\\\"name\\\":\\\"categories\\\",\\\"description\\\":\\\"The category of businesses to return.\\\",\\\"example\\\":\\\"Restaurants\\\",\\\"requires\\\":[\\\"term\\\"],\\\"excludes\\\":[\\\"term\\\"],\\\"values\\\":[\\\"Arts and Entertainment\\\",\\\"Business and Professional Services\\\",\\\"Community and Government\\\",\\\"Dining and Drinking\\\",\\\"Event\\\",\\\"Health and Medicine\\\",\\\"Landmarks and Outdoors\\\",\\\"Retail\\\",\\\"Sports and Recreation\\\",\\\"Travel and Transportation\\\"]}]}\"\n\nheaders = {\n    'content-type': \"application/json\",\n    'x-api-key': \"REPLACE_KEY_VALUE\"\n    }\n\nconn.request(\"POST\", \"/production/map\", payload, headers)\n\nres = conn.getresponse()\ndata = res.read()\n\nprint(data.decode(\"utf-8\"))"},{"lang":"Php + Curl","source":"<?php\n\n$curl = curl_init();\n\ncurl_setopt_array($curl, [\n  CURLOPT_URL => \"https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map\",\n  CURLOPT_RETURNTRANSFER => true,\n  CURLOPT_ENCODING => \"\",\n  CURLOPT_MAXREDIRS => 10,\n  CURLOPT_TIMEOUT => 30,\n  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\n  CURLOPT_CUSTOMREQUEST => \"POST\",\n  CURLOPT_POSTFIELDS => \"{\\\"query\\\":\\\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\\\",\\\"name\\\":\\\"yelp_businesses\\\",\\\"parameters\\\":[{\\\"name\\\":\\\"categories\\\",\\\"description\\\":\\\"The category of businesses to return.\\\",\\\"example\\\":\\\"Restaurants\\\",\\\"requires\\\":[\\\"term\\\"],\\\"excludes\\\":[\\\"term\\\"],\\\"values\\\":[\\\"Arts and Entertainment\\\",\\\"Business and Professional Services\\\",\\\"Community and Government\\\",\\\"Dining and Drinking\\\",\\\"Event\\\",\\\"Health and Medicine\\\",\\\"Landmarks and Outdoors\\\",\\\"Retail\\\",\\\"Sports and Recreation\\\",\\\"Travel and Transportation\\\"]}]}\",\n  CURLOPT_HTTPHEADER => [\n    \"content-type: application/json\",\n    \"x-api-key: REPLACE_KEY_VALUE\"\n  ],\n]);\n\n$response = curl_exec($curl);\n$err = curl_error($curl);\n\ncurl_close($curl);\n\nif ($err) {\n  echo \"cURL Error #:\" . $err;\n} else {\n  echo $response;\n}"},{"lang":"Php + Http1","source":"<?php\n\n$request = new HttpRequest();\n$request->setUrl('https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map');\n$request->setMethod(HTTP_METH_POST);\n\n$request->setHeaders([\n  'content-type' => 'application/json',\n  'x-api-key' => 'REPLACE_KEY_VALUE'\n]);\n\n$request->setBody('{\"query\":\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\",\"name\":\"yelp_businesses\",\"parameters\":[{\"name\":\"categories\",\"description\":\"The category of businesses to return.\",\"example\":\"Restaurants\",\"requires\":[\"term\"],\"excludes\":[\"term\"],\"values\":[\"Arts and Entertainment\",\"Business and Professional Services\",\"Community and Government\",\"Dining and Drinking\",\"Event\",\"Health and Medicine\",\"Landmarks and Outdoors\",\"Retail\",\"Sports and Recreation\",\"Travel and Transportation\"]}]}');\n\ntry {\n  $response = $request->send();\n\n  echo $response->getBody();\n} catch (HttpException $ex) {\n  echo $ex;\n}"},{"lang":"Php + Http2","source":"<?php\n\n$client = new http\\Client;\n$request = new http\\Client\\Request;\n\n$body = new http\\Message\\Body;\n$body->append('{\"query\":\"Find Mexican restaurants open now in Phoenix with a price range of $$$.\",\"name\":\"yelp_businesses\",\"parameters\":[{\"name\":\"categories\",\"description\":\"The category of businesses to return.\",\"example\":\"Restaurants\",\"requires\":[\"term\"],\"excludes\":[\"term\"],\"values\":[\"Arts and Entertainment\",\"Business and Professional Services\",\"Community and Government\",\"Dining and Drinking\",\"Event\",\"Health and Medicine\",\"Landmarks and Outdoors\",\"Retail\",\"Sports and Recreation\",\"Travel and Transportation\"]}]}');\n\n$request->setRequestUrl('https://y7xqsccv49.execute-api.us-west-1.amazonaws.com/production/map');\n$request->setRequestMethod('POST');\n$request->setBody($body);\n\n$request->setHeaders([\n  'content-type' => 'application/json',\n  'x-api-key' => 'REPLACE_KEY_VALUE'\n]);\n\n$client->enqueue($request)->send();\n$response = $client->getResponse();\n\necho $response->getBody();"}]}}},"components":{"securitySchemes":{"api_key":{"type":"apiKey","name":"x-api-key","in":"header"}},"schemas":{"response200":{"type":"object","description":"A map parameters endpoint 200 response.","properties":{"success":{"type":"boolean","description":"Whether or not the request completed successfully."},"requestId":{"type":"integer","description":"The allocated request id."},"result":{"type":"object","description":"The generated map of API parameter ids to values extracted from the natural language query.","example":{"categories":"Dining and Drinking"}},"warnings":{"type":"array","description":"A list of any warnings raised while executing the request.","items":{"type":"string"},"example":["Execution terminated early because an enumeration/taxonomy level passed in the request body exceeded the maximum supported size of 96 values"]}}},"response400":{"type":"object","description":"A map parameters endpoint 400 response.","properties":{"success":{"type":"boolean","example":false,"description":"Whether or not the request completed successfully."},"message":{"type":"string","description":"The error message.","example":"request body object is missing 'parameters' key"}}},"request":{"type":"object","description":"A map parameters endpoint request.","properties":{"query":{"description":"A natural language query.","type":"string","maxLength":250,"example":"Find Mexican restaurants open now in Phoenix with a price range of $$$."},"name":{"description":"A self-descriptive name for the endpoint for which parameters are being generated. 'name' should describe the type of data being returned by the request.","type":"string","maxLength":25,"example":"yelp_businesses"},"parameters":{"description":"A list of API parameters to parse from the request.","type":"array","items":{"$ref":"#/components/schemas/parameter"}}},"required":["query","name","parameters"]},"parameter":{"type":"object","description":"An API request parameter object.","properties":{"name":{"type":"string","description":"The API parameter name.","maxLength":25,"example":"categories"},"description":{"type":"string","description":"The API parameter description.","maxLength":250,"example":"The category of businesses to return."},"example":{"type":["number","string","boolean"],"description":"An example value of the API parameter if it is not an enumerated value.","example":"Restaurants"},"requires":{"type":"array","description":"A list of any other API parameters that must be parsed if this parameter is parsed.","items":{"type":"string"},"example":["term"]},"excludes":{"type":"array","description":"A list of any other API parameters that must not be parsed if this parameter is parsed.","items":{"type":"string"},"example":["term"]},"values":{"type":"array","description":"In case an API parameter is an enumerated value, the full enumeration of possible values. All enumeration values must be of the same type.","items":{"oneOf":[{"$ref":"#/components/schemas/simpleEnumerationValue"},{"$ref":"#/components/schemas/taxonomicEnumerationValue"}]},"maxItems":96,"example":["Arts and Entertainment","Business and Professional Services","Community and Government","Dining and Drinking","Event","Health and Medicine","Landmarks and Outdoors","Retail","Sports and Recreation","Travel and Transportation"]}},"required":["name","description"]},"simpleEnumerationValue":{"type":["number","string","boolean","null"],"description":"A valid simple enumeration value for an API parameter.","maxLength":50,"example":"Retail"},"taxonomicEnumerationValue":{"type":"object","description":"A valid taxonomic enumeration value for an API parameter.","properties":{"name":{"type":"string","description":"The name of the API parameter enumeration value.","maxLength":50,"example":"Mexican Restaurant"},"parents":{"type":"array","description":"The names of the parent enumeration values of this API parameter enumeration value.","items":{"type":"string"},"example":["Restaurant"]}},"required":["name","parents"]}}}}
